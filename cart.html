<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Cart & Favorites</title>
  <style>

body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #fff9f9, #fdf5f8);
  margin: 0;
  padding: 30px;
  color: #444;
  overflow-x: hidden;
  position: relative;
}


body::after {
  content: "‚ùÄ ‚ùÅ ‚ùÄ";
  display: block;
  text-align: center;
  color: #ffb6c1;
  font-size: 22px;
  letter-spacing: 10px;
  margin-top: 60px;
}


h2 {
  text-align: center;
  color: #c45a7a;
  font-size: 32px;
  margin-bottom: 25px;
  position: relative;
  font-family: 'Dancing Script', cursive;
}

h2::before {
  content: "‚ô°";
  color: #ff99cc;
  font-size: 22px;
  margin-right: 8px;
}

h2::after {
  content: "";
  display: block;
  width: 90px;
  height: 3px;
  background: #ff85a2;
  margin: 12px auto 0;
  border-radius: 2px;
}


.cart-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(420px, 1fr));
  gap: 25px;
  justify-content: center;
}

.cart-item {
  background: #fff;
  border: 1px solid #ffe0ea;
  border-radius: 15px;
  box-shadow: 0 4px 12px rgba(255,133,162,0.15);
  display: flex;
  align-items: center;
  padding: 18px;
  gap: 20px;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.cart-item:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 20px rgba(255,133,162,0.25);
}

.cart-item img {
  width: 95px;
  height: 95px;
  border-radius: 10px;
  object-fit: cover;
  box-shadow: 0 3px 6px rgba(0,0,0,0.08);
}

.details {
  flex-grow: 1;
}

.details h4 {
  margin: 0 0 6px;
  color: #b84e72;
  font-size: 17px;
  font-weight: 600;
  font-family: 'Dancing Script', cursive;
}

.details p {
  margin: 2px 0;
  font-size: 14px;
  color: #777;
}

.quantity {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 6px;
}

.quantity button {
  background: linear-gradient(135deg, #ff85a2, #ffb6c1);
  color: white;
  border: none;
  padding: 4px 10px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  transition: transform 0.2s, box-shadow 0.2s;
}

.quantity button:hover {
  transform: scale(1.1);
  box-shadow: 0 0 8px rgba(255,133,162,0.6);
}

.remove-btn {
  background: #ff6b81;
  color: white;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.remove-btn:hover {
  background: #e04a64;
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(224, 74, 100, 0.4);
}

.total-price {
  text-align: center;
  font-size: 20px;
  font-weight: bold;
  margin-top: 35px;
  color: #b84e72;
}


.favorites-section {
  margin-top: 70px;
  text-align: center;
}

.favorites-section h3 {
  display: inline-block;
  border-bottom: 3px solid #ff85a2;
  padding-bottom: 6px;
  color: #b84e72;
  font-size: 26px;
  position: relative;
  font-family: 'Dancing Script', cursive;
}

.favorites-section h3::before {
  content: "‚ú®";
  position: absolute;
  left: -25px;
  top: -2px;
  font-size: 20px;
}

.favorites-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 25px;
  margin-top: 30px;
  padding: 0 40px;
}

.favorite-card {
  background: #fff;
  border: 1px solid #ffe6ef;
  border-radius: 15px;
  box-shadow: 0 4px 10px rgba(255,133,162,0.1);
  overflow: hidden;
  position: relative;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.favorite-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 10px 20px rgba(255,133,162,0.25);
}

.favorite-card img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.favorite-card:hover img {
  transform: scale(1.05);
}

.favorite-card .info {
  padding: 15px 18px;
  text-align: left;
}

.favorite-card h4 {
  margin: 4px 0;
  font-size: 16px;
  color: #b84e72;
}

.favorite-card p {
  margin: 0;
  color: #777;
  font-size: 14px;
}

.heart-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #fff;
  border: none;
  font-size: 22px;
  color: #ff6b81;
  cursor: pointer;
  border-radius: 50%;
  width: 35px;
  height: 35px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  transition: all 0.25s ease;
}

.heart-btn:hover {
  transform: scale(1.15) rotate(10deg);
  background: #ffeff1;
  box-shadow: 0 0 10px rgba(255,107,129,0.4);
}


.flower {
  position: absolute;
  font-size: 22px;
  color: #ffb6c1;
  opacity: 0.8;
  animation: floatFlowers 10s infinite ease-in-out;
}

@keyframes floatFlowers {
  0% { transform: translateY(0) rotate(0deg); opacity: 1; }
  50% { transform: translateY(-20px) rotate(10deg); opacity: 0.8; }
  100% { transform: translateY(0) rotate(0deg); opacity: 1; }
}


@media (max-width:600px) {
  .favorites-container { padding: 0 10px; }
  .cart-container { grid-template-columns: 1fr; }
  .cart-item { flex-direction: column; align-items: flex-start; }
  .cart-item img { width: 100%; height: 180px; }
}

  </style>
</head>
<body>
  <h2>üõí My Cart</h2>
  <div class="cart-container" id="cartContainer"></div>
  <div class="total-price" id="totalPrice">Total: $0</div>

  <div class="favorites-section">
    <h3>‚ù§Ô∏è Favorite Items</h3>
    <div class="favorites-container" id="favoritesContainer"></div>
  </div>
<span class="flower" style="top:50px; left:80px;">üå∏</span>
<span class="flower" style="top:120px; right:100px;">üå∑</span>
<span class="flower" style="bottom:80px; left:60px;">üåº</span>
<span class="flower" style="bottom:120px; right:50px;">üå∫</span>
<span class="flower" style="top:200px; left:50%; font-size:28px;">üåª</span>

<script>
const productsData = {
  "Silver Necklace": { image: "../project 4/images/img10.png", category: "Primer", price: 400 },
  "Gold Necklace": { image: "../project 4/images/img11.png", category: "Serum", price: 150 },
  "Rose Bracelet": { image: "../project 4/images/img1.jfif", category: "Moisturize", price: 200 },
  "Diamond Ring": { image: "../project 4/images/img7.png", category: "Serum", price: 500 },
  "Luxury Earrings": { image: "../project 4/images/imgc.png", category: "Vitamin C", price: 250 },
  "Gold Bracelet": { image: "../project 4/images/imgb.png", category: "Foundationt", price: 180 },
  "Platinum Ring": { image: "../project 4/images/imga.png", category: "Shampoo", price: 600 },
  "Crystal Necklace": { image: "../project 4/images/img8.png", category: "Lotion", price: 350 },
  "Luxury Watch": { image: "../project 4/images/img2.jfif", category: "Cream", price: 800 }
};

let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

const cartContainer = document.getElementById("cartContainer");
const totalPriceElement = document.getElementById("totalPrice");
const favoritesContainer = document.getElementById("favoritesContainer");


function normalizeItem(item) {
  if (!item) return null;
  if (typeof item === "string") {
    const name = item;
    const pd = productsData[name] || {};
    return { name, image: pd.image, category: pd.category, price: pd.price || 0, quantity: 1 };
  }
  const name = item.name || item.title || "undefined";
  const image = item.image || item.img || (productsData[name]?.image);
  const category = item.category || item.type || (productsData[name]?.category);
  const price = Number(item.price ?? (productsData[name]?.price)) || 0;
  const quantity = Number(item.quantity) || 1;
  return { name, image, category, price, quantity };
}


function renderCartPage() {
  cartContainer.innerHTML = "";

  if (!cartItems.length) {
    cartContainer.innerHTML = "<p style='text-align:center;color:#777'>Your cart is empty</p>";
    totalPriceElement.textContent = "Total: $0";
    return;
  }

  let total = 0;
  cartItems = cartItems.map(item => {
    const normalized = normalizeItem(item);
    if (!normalized.quantity) normalized.quantity = 1;
    return normalized;
  });

  cartItems.forEach((item, i) => {
    const imgSrc = item.image || "https://via.placeholder.com/90?text=No+Image";
    total += item.price * item.quantity;

    const div = document.createElement("div");
    div.className = "cart-item";
    div.innerHTML = `
      <img src="${imgSrc}" alt="${item.name}">
      <div class="details">
        <h4>${item.name}</h4>
        <p>Category: ${item.category || "undefined"}</p>
        <p>Price: $${item.price.toFixed(2)}</p>
        <p><strong>Subtotal:</strong> $${(item.price * item.quantity).toFixed(2)}</p>
        <div class="quantity">
          <button data-action="dec" data-index="${i}">-</button>
          <span>${item.quantity}</span>
          <button data-action="inc" data-index="${i}">+</button>
        </div>
      </div>
      <button class="remove-btn" data-remove="${i}">Remove</button>
    `;
    cartContainer.appendChild(div);
  });

  updateTotalPrice(total);


  cartContainer.querySelectorAll("[data-action]").forEach(b => {
    b.onclick = () => {
      const i = +b.dataset.index;
      const action = b.dataset.action;
      updateQuantity(i, action === "inc" ? 1 : -1);
    };
  });


  cartContainer.querySelectorAll("[data-remove]").forEach(b => {
    b.onclick = () => removeItem(+b.dataset.remove);
  });
}


function updateQuantity(i, change) {
  const item = normalizeItem(cartItems[i]);
  const newQty = Math.max(1, item.quantity + change);
  item.quantity = newQty;
  cartItems[i] = item;

  localStorage.setItem("cartItems", JSON.stringify(cartItems));

  renderCartPage();
}


function removeItem(i) {
  cartItems.splice(i, 1);
  localStorage.setItem("cartItems", JSON.stringify(cartItems));
  renderCartPage();
}


function updateTotalPrice(total) {
  totalPriceElement.textContent = `Total: $${total.toFixed(2)}`;
  totalPriceElement.style.transition = "transform 0.2s ease";
  totalPriceElement.style.transform = "scale(1.2)";
  setTimeout(() => (totalPriceElement.style.transform = "scale(1)"), 200);
}


function renderFavorites() {
  favoritesContainer.innerHTML = "";
  if (!favorites.length) {
    favoritesContainer.innerHTML = "<p style='color:#777'>No favorite items yet</p>";
    return;
  }

  favorites.forEach((raw, i) => {
    const fav = normalizeItem(raw);
    const imgSrc = fav.image || "https://via.placeholder.com/250?text=No+Image";
    const card = document.createElement("div");
    card.className = "favorite-card";
    card.innerHTML = `
      <img src="${imgSrc}" alt="${fav.name}">
      <button class="heart-btn" data-fav-index="${i}">‚ù§Ô∏è</button>
      <div class="info"><h4>${fav.name}</h4><p>${fav.category || "undefined"}</p></div>
    `;
    favoritesContainer.appendChild(card);
  });

  favoritesContainer.querySelectorAll(".heart-btn").forEach(b => {
    b.onclick = () => {
      const i = +b.dataset.favIndex;
      favorites.splice(i, 1);
      localStorage.setItem("favorites", JSON.stringify(favorites));
      renderFavorites();
    };
  });
}

renderCartPage();
renderFavorites();

</script>
</body>
</html>
